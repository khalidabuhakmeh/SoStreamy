(function(){var n=!0;(function(t,i,r,u,f){!function(n){if(typeof require=="function"&&typeof exports=="object"&&typeof module=="object"){var i=module.exports||exports;n(i)}else typeof define=="function"&&define.amd?define(["exports"],n):n(t.ko={})}(function(e){function k(n){var t=this,i,r;if(n)for(i in n)r=o.extenders[i],typeof r=="function"&&(t=r(t,n[i]));return t}function d(n){o.bindingHandlers[n]={init:function(t,i,r,u){var f=function(){var t={};return t[n]=i(),t};return o.bindingHandlers.event.init.call(this,t,f,r,u)}}}function p(n,t,i,r){o.bindingHandlers[n]={init:function(n){return o.utils.domData.set(n,y,{}),{controlsDescendantBindings:!0}},update:function(n,u,f,e,s){var h=o.utils.domData.get(n,y),a=o.utils.unwrapObservable(u()),c=!i!=!a,l=!h.savedNodes,v=l||t||c!==h.didDisplayOnLastUpdate;v&&(l&&(h.savedNodes=o.utils.cloneNodes(o.virtualElements.childNodes(n),!0)),c?(l||o.virtualElements.setDomNodeChildren(n,o.utils.cloneNodes(h.savedNodes)),o.applyBindingsToDescendants(r?r(s,a):s,n)):o.virtualElements.emptyNode(n),h.didDisplayOnLastUpdate=c)}},o.expressionRewriting.bindingRewriteValidators[n]=!1,o.virtualElements.allowedBindings[n]=!0}function b(n,t,i){i&&t!==o.selectExtensions.readValue(n)&&o.selectExtensions.writeValue(n,t),t!==o.selectExtensions.readValue(n)&&o.dependencyDetection.ignore(o.utils.triggerEvent,null,[n,"change"])}var o=typeof e!="undefined"?e:{},c,w,s,l,a,v,h,y;o.exportSymbol=function(n,t){for(var i=n.split("."),u=o,r=0;r<i.length-1;r++)u=u[i[r]];u[i[i.length-1]]=t},o.exportProperty=function(n,t,i){n[t]=i},o.version="2.2.1",o.exportSymbol("version",o.version),o.utils=new function(){function l(n,t){if(o.utils.tagNameLower(n)!=="input"||!n.type||t.toLowerCase()!="click")return!1;var i=n.type;return i=="checkbox"||i=="radio"}var y=/^(\s|\u00A0)+|(\s|\u00A0)+$/g,e={},a={},p=/Firefox\/2/i.test(r.userAgent)?"KeyboardEvent":"UIEvents",c,s,h,v;e[p]=["keyup","keydown","keypress"],e.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"];for(c in e)if(s=e[c],s.length)for(h=0,v=s.length;h<v;h++)a[s[h]]=c;var w={propertychange:!0},n=function(){for(var n=3,t=i.createElement("div"),r=t.getElementsByTagName("i");t.innerHTML="<!--[if gt IE "+ ++n+"]><i><\/i><![endif]-->",r[0];);return n>4?n:f}(),b=n===6,k=n===7;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(n,t){for(var i=0,r=n.length;i<r;i++)t(n[i])},arrayIndexOf:function(n,t){if(typeof Array.prototype.indexOf=="function")return Array.prototype.indexOf.call(n,t);for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return i;return-1},arrayFirst:function(n,t,i){for(var r=0,u=n.length;r<u;r++)if(t.call(i,n[r]))return n[r];return null},arrayRemoveItem:function(n,t){var i=o.utils.arrayIndexOf(n,t);i>=0&&n.splice(i,1)},arrayGetDistinctValues:function(n){var i,t,r;for(n=n||[],i=[],t=0,r=n.length;t<r;t++)o.utils.arrayIndexOf(i,n[t])<0&&i.push(n[t]);return i},arrayMap:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)r.push(t(n[i]));return r},arrayFilter:function(n,t){var r,i,u;for(n=n||[],r=[],i=0,u=n.length;i<u;i++)t(n[i])&&r.push(n[i]);return r},arrayPushAll:function(n,t){if(t instanceof Array)n.push.apply(n,t);else for(var i=0,r=t.length;i<r;i++)n.push(t[i]);return n},extend:function(n,t){if(t)for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n},emptyDomNode:function(n){while(n.firstChild)o.removeNode(n.firstChild)},moveCleanedNodesToContainerElement:function(n){for(var r=o.utils.makeArray(n),u=i.createElement("div"),t=0,f=r.length;t<f;t++)u.appendChild(o.cleanNode(r[t]));return u},cloneNodes:function(n,t){for(var r,i=0,f=n.length,u=[];i<f;i++)r=n[i].cloneNode(!0),u.push(t?o.cleanNode(r):r);return u},setDomNodeChildren:function(n,t){if(o.utils.emptyDomNode(n),t)for(var i=0,r=t.length;i<r;i++)n.appendChild(t[i])},replaceDomNodes:function(n,t){var u=n.nodeType?[n]:n,f,e,i,r;if(u.length>0){for(f=u[0],e=f.parentNode,i=0,r=t.length;i<r;i++)e.insertBefore(t[i],f);for(i=0,r=u.length;i<r;i++)o.removeNode(u[i])}},setOptionNodeSelectionState:function(t,i){n<7?t.setAttribute("selected",i):t.selected=i},stringTrim:function(n){return(n||"").replace(y,"")},stringTokenize:function(n,t){for(var u=[],f=(n||"").split(t),r,i=0,e=f.length;i<e;i++)r=o.utils.stringTrim(f[i]),r!==""&&u.push(r);return u},stringStartsWith:function(n,t){return(n=n||"",t.length>n.length)?!1:n.substring(0,t.length)===t},domNodeIsContainedBy:function(n,t){if(t.compareDocumentPosition)return(t.compareDocumentPosition(n)&16)==16;while(n!=null){if(n==t)return!0;n=n.parentNode}return!1},domNodeIsAttachedToDocument:function(n){return o.utils.domNodeIsContainedBy(n,n.ownerDocument)},tagNameLower:function(n){return n&&n.tagName&&n.tagName.toLowerCase()},registerEventHandler:function(t,i,r){var f=n&&w[i],e;if(f||typeof u=="undefined")if(f||typeof t.addEventListener!="function")if(typeof t.attachEvent!="undefined")t.attachEvent("on"+i,function(n){r.call(t,n)});else throw new Error("Browser doesn't support addEventListener or attachEvent");else t.addEventListener(i,r,!1);else l(t,i)&&(e=r,r=function(n,t){var i=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),e.call(this,n),this.checked=i}),u(t).bind(i,r)},triggerEvent:function(n,r){var f,o,e;if(!(n&&n.nodeType))throw new Error("element must be a DOM node when calling triggerEvent");if(typeof u!="undefined")f=[],l(n,r)&&f.push({checkedStateBeforeEvent:n.checked}),u(n).trigger(r,f);else if(typeof i.createEvent=="function")if(typeof n.dispatchEvent=="function")o=a[r]||"HTMLEvents",e=i.createEvent(o),e.initEvent(r,!0,!0,t,0,0,0,0,0,!1,!1,!1,!1,0,n),n.dispatchEvent(e);else throw new Error("The supplied element doesn't support dispatchEvent");else if(typeof n.fireEvent!="undefined")l(n,r)&&(n.checked=n.checked!==!0),n.fireEvent("on"+r);else throw new Error("Browser doesn't support triggering events");},unwrapObservable:function(n){return o.isObservable(n)?n():n},peekObservable:function(n){return o.isObservable(n)?n.peek():n},toggleDomNodeCssClass:function(n,t,i){if(t){var u=/[\w-]+/g,r=n.className.match(u)||[];o.utils.arrayForEach(t.match(u),function(n){var t=o.utils.arrayIndexOf(r,n);t>=0?i||r.splice(t,1):i&&r.push(n)}),n.className=r.join(" ")}},setTextContent:function(n,t){var r=o.utils.unwrapObservable(t),u;(r===null||r===f)&&(r=""),n.nodeType===3?n.data=r:(u=o.virtualElements.firstChild(n),!u||u.nodeType!=3||o.virtualElements.nextSibling(u)?o.virtualElements.setDomNodeChildren(n,[i.createTextNode(r)]):u.data=r,o.utils.forceRefresh(n))},setElementName:function(t,r){if(t.name=r,n<=7)try{t.mergeAttributes(i.createElement("<input name='"+t.name+"'/>"),!1)}catch(u){}},forceRefresh:function(t){if(n>=9){var i=t.nodeType==1?t:t.parentNode;i.style&&(i.style.zoom=i.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(t){if(n>=9){var i=t.style.width;t.style.width=0,t.style.width=i}},range:function(n,t){var r,i;for(n=o.utils.unwrapObservable(n),t=o.utils.unwrapObservable(t),r=[],i=n;i<=t;i++)r.push(i);return r},makeArray:function(n){for(var i=[],t=0,r=n.length;t<r;t++)i.push(n[t]);return i},isIe6:b,isIe7:k,ieVersion:n,getFormFields:function(n,t){for(var r=o.utils.makeArray(n.getElementsByTagName("input")).concat(o.utils.makeArray(n.getElementsByTagName("textarea"))),f=typeof t=="string"?function(n){return n.name===t}:function(n){return t.test(n.name)},u=[],i=r.length-1;i>=0;i--)f(r[i])&&u.push(r[i]);return u},parseJson:function(n){return typeof n=="string"&&(n=o.utils.stringTrim(n),n)?t.JSON&&t.JSON.parse?t.JSON.parse(n):new Function("return "+n)():null},stringifyJson:function(n,t,i){if(typeof JSON=="undefined"||typeof JSON.stringify=="undefined")throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(o.utils.unwrapObservable(n),t,i)},postJson:function(n,t,r){var a,h,c,s,u,e,f;r=r||{};var l=r.params||{},v=r.includeFields||this.fieldsIncludedWithJsonPost,y=n;if(typeof n=="object"&&o.utils.tagNameLower(n)==="form")for(a=n,y=a.action,h=v.length-1;h>=0;h--)for(c=o.utils.getFormFields(a,v[h]),s=c.length-1;s>=0;s--)l[c[s].name]=c[s].value;t=o.utils.unwrapObservable(t),u=i.createElement("form"),u.style.display="none",u.action=y,u.method="post";for(e in t)f=i.createElement("input"),f.name=e,f.value=o.utils.stringifyJson(o.utils.unwrapObservable(t[e])),u.appendChild(f);for(e in l)f=i.createElement("input"),f.name=e,f.value=l[e],u.appendChild(f);i.body.appendChild(u),r.submitter?r.submitter(u):u.submit(),setTimeout(function(){u.parentNode.removeChild(u)},0)}}},o.exportSymbol("utils",o.utils),o.exportSymbol("utils.arrayForEach",o.utils.arrayForEach),o.exportSymbol("utils.arrayFirst",o.utils.arrayFirst),o.exportSymbol("utils.arrayFilter",o.utils.arrayFilter),o.exportSymbol("utils.arrayGetDistinctValues",o.utils.arrayGetDistinctValues),o.exportSymbol("utils.arrayIndexOf",o.utils.arrayIndexOf),o.exportSymbol("utils.arrayMap",o.utils.arrayMap),o.exportSymbol("utils.arrayPushAll",o.utils.arrayPushAll),o.exportSymbol("utils.arrayRemoveItem",o.utils.arrayRemoveItem),o.exportSymbol("utils.extend",o.utils.extend),o.exportSymbol("utils.fieldsIncludedWithJsonPost",o.utils.fieldsIncludedWithJsonPost),o.exportSymbol("utils.getFormFields",o.utils.getFormFields),o.exportSymbol("utils.peekObservable",o.utils.peekObservable),o.exportSymbol("utils.postJson",o.utils.postJson),o.exportSymbol("utils.parseJson",o.utils.parseJson),o.exportSymbol("utils.registerEventHandler",o.utils.registerEventHandler),o.exportSymbol("utils.stringifyJson",o.utils.stringifyJson),o.exportSymbol("utils.range",o.utils.range),o.exportSymbol("utils.toggleDomNodeCssClass",o.utils.toggleDomNodeCssClass),o.exportSymbol("utils.triggerEvent",o.utils.triggerEvent),o.exportSymbol("utils.unwrapObservable",o.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(n){var i=this,t=Array.prototype.slice.call(arguments),n=t.shift();return function(){return i.apply(n,t.concat(Array.prototype.slice.call(arguments)))}}),o.utils.domData=new function(){var i=0,n="__ko__"+(new Date).getTime(),t={};return{get:function(n,t){var i=o.utils.domData.getAll(n,!1);return i===f?f:i[t]},set:function(n,t,i){if(i!==f||o.utils.domData.getAll(n,!1)!==f){var r=o.utils.domData.getAll(n,!0);r[t]=i}},getAll:function(r,u){var e=r[n],o=e&&e!=="null"&&t[e];if(!o){if(!u)return f;e=r[n]="ko"+i++,t[e]={}}return t[e]},clear:function(i){var r=i[n];return r?(delete t[r],i[n]=null,!0):!1}}},o.exportSymbol("utils.domData",o.utils.domData),o.exportSymbol("utils.domData.clear",o.utils.domData.clear),o.utils.domNodeDisposal=new function(){function t(t,i){var r=o.utils.domData.get(t,n);return r===f&&i&&(r=[],o.utils.domData.set(t,n,r)),r}function s(t){o.utils.domData.set(t,n,f)}function i(n){var i=t(n,!1),f;if(i)for(i=i.slice(0),f=0;f<i.length;f++)i[f](n);o.utils.domData.clear(n),typeof u=="function"&&typeof u.cleanData=="function"&&u.cleanData([n]),r[n.nodeType]&&h(n)}function h(n){for(var t,r=n.firstChild;t=r;)r=t.nextSibling,t.nodeType===8&&i(t)}var n="__ko_domNodeDisposal__"+(new Date).getTime(),e={1:!0,8:!0,9:!0},r={1:!0,9:!0};return{addDisposeCallback:function(n,i){if(typeof i!="function")throw new Error("Callback must be a function");t(n,!0).push(i)},removeDisposeCallback:function(n,i){var r=t(n,!1);r&&(o.utils.arrayRemoveItem(r,i),r.length==0&&s(n))},cleanNode:function(n){var t,u,f;if(e[n.nodeType]&&(i(n),r[n.nodeType]))for(t=[],o.utils.arrayPushAll(t,n.getElementsByTagName("*")),u=0,f=t.length;u<f;u++)i(t[u]);return n},removeNode:function(n){o.cleanNode(n),n.parentNode&&n.parentNode.removeChild(n)}}},o.cleanNode=o.utils.domNodeDisposal.cleanNode,o.removeNode=o.utils.domNodeDisposal.removeNode,o.exportSymbol("cleanNode",o.cleanNode),o.exportSymbol("removeNode",o.removeNode),o.exportSymbol("utils.domNodeDisposal",o.utils.domNodeDisposal),o.exportSymbol("utils.domNodeDisposal.addDisposeCallback",o.utils.domNodeDisposal.addDisposeCallback),o.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",o.utils.domNodeDisposal.removeDisposeCallback),function(){function n(n){var u=o.utils.stringTrim(n).toLowerCase(),r=i.createElement("div"),f=u.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","<\/table>"]||!u.indexOf("<tr")&&[2,"<table><tbody>","<\/tbody><\/table>"]||(!u.indexOf("<td")||!u.indexOf("<th"))&&[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"]||[0,"",""],e="ignored<div>"+f[1]+n+f[2]+"<\/div>";for(typeof t.innerShiv=="function"?r.appendChild(t.innerShiv(e)):r.innerHTML=e;f[0]--;)r=r.lastChild;return o.utils.makeArray(r.lastChild.childNodes)}function r(n){var i,t;if(u.parseHTML)return u.parseHTML(n);if(i=u.clean([n]),i&&i[0]){for(t=i[0];t.parentNode&&t.parentNode.nodeType!==11;)t=t.parentNode;t.parentNode&&t.parentNode.removeChild(t)}return i}o.utils.parseHtmlFragment=function(t){return typeof u!="undefined"?r(t):n(t)},o.utils.setHtml=function(n,t){var r,i;if(o.utils.emptyDomNode(n),t=o.utils.unwrapObservable(t),t!==null&&t!==f)if(typeof t!="string"&&(t=t.toString()),typeof u!="undefined")u(n).html(t);else for(r=o.utils.parseHtmlFragment(t),i=0;i<r.length;i++)n.appendChild(r[i])}}(),o.exportSymbol("utils.parseHtmlFragment",o.utils.parseHtmlFragment),o.exportSymbol("utils.setHtml",o.utils.setHtml),o.memoization=function(){function t(){return((1+Math.random())*4294967296|0).toString(16).substring(1)}function r(){return t()+t()}function i(n,t){var r;if(n)if(n.nodeType==8)r=o.memoization.parseMemoText(n.nodeValue),r!=null&&t.push({domNode:n,memoId:r});else if(n.nodeType==1)for(var u=0,f=n.childNodes,e=f.length;u<e;u++)i(f[u],t)}var n={};return{memoize:function(t){if(typeof t!="function")throw new Error("You can only pass a function to ko.memoization.memoize()");var i=r();return n[i]=t,"<!--[ko_memo:"+i+"]-->"},unmemoize:function(t,i){var r=n[t];if(r===f)throw new Error("Couldn't find any memo with ID "+t+". Perhaps it's already been unmemoized.");try{return r.apply(null,i||[]),!0}finally{delete n[t]}},unmemoizeDomNodeAndDescendants:function(n,t){var f=[],u,s,r,e;for(i(n,f),u=0,s=f.length;u<s;u++)r=f[u].domNode,e=[r],t&&o.utils.arrayPushAll(e,t),o.memoization.unmemoize(f[u].memoId,e),r.nodeValue="",r.parentNode&&r.parentNode.removeChild(r)},parseMemoText:function(n){var t=n.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),o.exportSymbol("memoization",o.memoization),o.exportSymbol("memoization.memoize",o.memoization.memoize),o.exportSymbol("memoization.unmemoize",o.memoization.unmemoize),o.exportSymbol("memoization.parseMemoText",o.memoization.parseMemoText),o.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",o.memoization.unmemoizeDomNodeAndDescendants),o.extenders={throttle:function(n,t){n.throttleEvaluation=t;var i=null;return o.dependentObservable({read:n,write:function(r){clearTimeout(i),i=setTimeout(function(){n(r)},t)}})},notify:function(n,t){return n.equalityComparer=t=="always"?function(){return!1}:o.observable.fn.equalityComparer,n}},o.exportSymbol("extenders",o.extenders),o.subscription=function(n,t,i){this.target=n,this.callback=t,this.disposeCallback=i,o.exportProperty(this,"dispose",this.dispose)},o.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},o.subscribable=function(){this._subscriptions={},o.utils.extend(this,o.subscribable.fn),o.exportProperty(this,"subscribe",this.subscribe),o.exportProperty(this,"extend",this.extend),o.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)},c="change",o.subscribable.fn={subscribe:function(n,t,i){i=i||c;var u=t?n.bind(t):n,r=new o.subscription(this,u,function(){o.utils.arrayRemoveItem(this._subscriptions[i],r)}.bind(this));return this._subscriptions[i]||(this._subscriptions[i]=[]),this._subscriptions[i].push(r),r},notifySubscribers:function(n,t){t=t||c,this._subscriptions[t]&&o.dependencyDetection.ignore(function(){o.utils.arrayForEach(this._subscriptions[t].slice(0),function(t){t&&t.isDisposed!==!0&&t.callback(n)})},this)},getSubscriptionsCount:function(){var t=0,n;for(n in this._subscriptions)this._subscriptions.hasOwnProperty(n)&&(t+=this._subscriptions[n].length);return t},extend:k},o.isSubscribable=function(n){return typeof n.subscribe=="function"&&typeof n.notifySubscribers=="function"},o.exportSymbol("subscribable",o.subscribable),o.exportSymbol("isSubscribable",o.isSubscribable),o.dependencyDetection=function(){var n=[];return{begin:function(t){n.push({callback:t,distinctDependencies:[]})},end:function(){n.pop()},registerDependency:function(t){if(!o.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(n.length>0){var i=n[n.length-1];if(!i||o.utils.arrayIndexOf(i.distinctDependencies,t)>=0)return;i.distinctDependencies.push(t),i.callback(t)}},ignore:function(t,i,r){try{return n.push(null),t.apply(i,r||[])}finally{n.pop()}}}}(),w={undefined:!0,boolean:!0,number:!0,string:!0},o.observable=function(t){function i(){return arguments.length>0?(i.equalityComparer&&i.equalityComparer(r,arguments[0])||(i.valueWillMutate(),r=arguments[0],n&&(i._latestValue=r),i.valueHasMutated()),this):(o.dependencyDetection.registerDependency(i),r)}var r=t;return n&&(i._latestValue=r),o.subscribable.call(i),i.peek=function(){return r},i.valueHasMutated=function(){i.notifySubscribers(r)},i.valueWillMutate=function(){i.notifySubscribers(r,"beforeChange")},o.utils.extend(i,o.observable.fn),o.exportProperty(i,"peek",i.peek),o.exportProperty(i,"valueHasMutated",i.valueHasMutated),o.exportProperty(i,"valueWillMutate",i.valueWillMutate),i},o.observable.fn={equalityComparer:function(n,t){var i=n===null||typeof n in w;return i?n===t:!1}},s=o.observable.protoProperty="__ko_proto__",o.observable.fn[s]=o.observable,o.hasPrototype=function(n,t){return n===null||n===f||n[s]===f?!1:n[s]===t?!0:o.hasPrototype(n[s],t)},o.isObservable=function(n){return o.hasPrototype(n,o.observable)},o.isWriteableObservable=function(n){return typeof n=="function"&&n[s]===o.observable?!0:typeof n=="function"&&n[s]===o.dependentObservable&&n.hasWriteFunction?!0:!1},o.exportSymbol("observable",o.observable),o.exportSymbol("isObservable",o.isObservable),o.exportSymbol("isWriteableObservable",o.isWriteableObservable),o.observableArray=function(n){if(arguments.length==0&&(n=[]),n!==null&&n!==f&&!("length"in n))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=o.observable(n);return o.utils.extend(t,o.observableArray.fn),t},o.observableArray.fn={remove:function(n){for(var r=this.peek(),i=[],f=typeof n=="function"?n:function(t){return t===n},u,t=0;t<r.length;t++)u=r[t],f(u)&&(i.length===0&&this.valueWillMutate(),i.push(u),r.splice(t,1),t--);return i.length&&this.valueHasMutated(),i},removeAll:function(n){if(n===f){var t=this.peek(),i=t.slice(0);return this.valueWillMutate(),t.splice(0,t.length),this.valueHasMutated(),i}return n?this.remove(function(t){return o.utils.arrayIndexOf(n,t)>=0}):[]},destroy:function(n){var i=this.peek(),u=typeof n=="function"?n:function(t){return t===n},t,r;for(this.valueWillMutate(),t=i.length-1;t>=0;t--)r=i[t],u(r)&&(i[t]._destroy=!0);this.valueHasMutated()},destroyAll:function(n){return n===f?this.destroy(function(){return!0}):n?this.destroy(function(t){return o.utils.arrayIndexOf(n,t)>=0}):[]},indexOf:function(n){var t=this();return o.utils.arrayIndexOf(t,n)},replace:function(n,t){var i=this.indexOf(n);i>=0&&(this.valueWillMutate(),this.peek()[i]=t,this.valueHasMutated())}},o.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(n){o.observableArray.fn[n]=function(){var t=this.peek(),i;return this.valueWillMutate(),i=t[n].apply(t,arguments),this.valueHasMutated(),i}}),o.utils.arrayForEach(["slice"],function(n){o.observableArray.fn[n]=function(){var t=this();return t[n].apply(t,arguments)}}),o.exportSymbol("observableArray",o.observableArray),o.dependentObservable=function(t,i,r){function nt(n){s.push(n.subscribe(tt))}function w(){o.utils.arrayForEach(s,function(n){n.dispose()}),s=[]}function tt(){var n=u.throttleEvaluation;n&&n>=0?(clearTimeout(d),d=setTimeout(l,n)):l()}function l(){var t,l,r;if(!y){if(c&&p()){a();return}y=!0;try{for(t=o.utils.arrayMap(s,function(n){return n.target}),o.dependencyDetection.begin(function(n){var i;(i=o.utils.arrayIndexOf(t,n))>=0?t[i]=f:nt(n)}),l=e.call(i),r=t.length-1;r>=0;r--)t[r]&&s.splice(r,1)[0].dispose();c=!0,u.notifySubscribers(h,"beforeChange"),h=l,n&&(u._latestValue=h)}finally{o.dependencyDetection.end()}u.notifySubscribers(h),y=!1,s.length||a()}}function u(){if(arguments.length>0){if(typeof k=="function")k.apply(i,arguments);else throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return this}return c||l(),o.dependencyDetection.registerDependency(u),h}function it(){return c||l(),h}function b(){return!c||s.length>0}var h,c=!1,y=!1,e=t,g;if(e&&typeof e=="object"?(r=e,e=r.read):(r=r||{},e||(e=r.read)),typeof e!="function")throw new Error("Pass a function that returns the value of the ko.computed");var k=r.write,v=r.disposeWhenNodeIsRemoved||r.disposeWhenNodeIsRemoved||null,p=r.disposeWhen||r.disposeWhen||function(){return!1},a=w,s=[],d=null;return i||(i=r.owner),u.peek=it,u.getDependenciesCount=function(){return s.length},u.hasWriteFunction=typeof r.write=="function",u.dispose=function(){a()},u.isActive=b,o.subscribable.call(u),o.utils.extend(u,o.dependentObservable.fn),o.exportProperty(u,"peek",u.peek),o.exportProperty(u,"dispose",u.dispose),o.exportProperty(u,"isActive",u.isActive),o.exportProperty(u,"getDependenciesCount",u.getDependenciesCount),r.deferEvaluation!==!0&&l(),v&&b()&&(a=function(){o.utils.domNodeDisposal.removeDisposeCallback(v,arguments.callee),w()},o.utils.domNodeDisposal.addDisposeCallback(v,a),g=p,p=function(){return!o.utils.domNodeIsAttachedToDocument(v)||g()}),u},o.isComputed=function(n){return o.hasPrototype(n,o.dependentObservable)},l=o.observable.protoProperty,o.dependentObservable[l]=o.observable,o.dependentObservable.fn={},o.dependentObservable.fn[l]=o.dependentObservable,o.exportSymbol("dependentObservable",o.dependentObservable),o.exportSymbol("computed",o.dependentObservable),o.exportSymbol("isComputed",o.isComputed),function(){function n(t,u,e){var s,o;return(e=e||new r,t=u(t),s=typeof t=="object"&&t!==null&&t!==f&&!(t instanceof Date),!s)?t:(o=t instanceof Array?[]:{},e.save(t,o),i(t,function(i){var r=u(t[i]),s;switch(typeof r){case"boolean":case"number":case"string":case"function":o[i]=r;break;case"object":case"undefined":s=e.get(r),o[i]=s!==f?s:n(r,u,e)}}),o)}function i(n,t){var i,r;if(n instanceof Array){for(i=0;i<n.length;i++)t(i);typeof n.toJSON=="function"&&t("toJSON")}else for(r in n)t(r)}function r(){var n=[],t=[];this.save=function(i,r){var u=o.utils.arrayIndexOf(n,i);u>=0?t[u]=r:(n.push(i),t.push(r))},this.get=function(i){var r=o.utils.arrayIndexOf(n,i);return r>=0?t[r]:f}}var t=10;o.toJS=function(i){if(arguments.length==0)throw new Error("When calling ko.toJS, pass the object you want to convert.");return n(i,function(n){for(var i=0;o.isObservable(n)&&i<t;i++)n=n();return n})},o.toJSON=function(n,t,i){var r=o.toJS(n);return o.utils.stringifyJson(r,t,i)}}(),o.exportSymbol("toJS",o.toJS),o.exportSymbol("toJSON",o.toJSON),function(){var n="__ko__hasDomDataOptionValue__";o.selectExtensions={readValue:function(t){switch(o.utils.tagNameLower(t)){case"option":return t[n]===!0?o.utils.domData.get(t,o.bindingHandlers.options.optionValueDomDataKey):o.utils.ieVersion<=7?t.getAttributeNode("value").specified?t.value:t.text:t.value;case"select":return t.selectedIndex>=0?o.selectExtensions.readValue(t.options[t.selectedIndex]):f;default:return t.value}},writeValue:function(t,i){switch(o.utils.tagNameLower(t)){case"option":switch(typeof i){case"string":o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,f),n in t&&delete t[n],t.value=i;break;default:o.utils.domData.set(t,o.bindingHandlers.options.optionValueDomDataKey,i),t[n]=!0,t.value=typeof i=="number"?i:""}break;case"select":for(var r=t.options.length-1;r>=0;r--)if(o.selectExtensions.readValue(t.options[r])==i){t.selectedIndex=r;break}break;default:(i===null||i===f)&&(i=""),t.value=i}}}}(),o.exportSymbol("selectExtensions",o.selectExtensions),o.exportSymbol("selectExtensions.readValue",o.selectExtensions.readValue),o.exportSymbol("selectExtensions.writeValue",o.selectExtensions.writeValue),o.expressionRewriting=function(){function n(n,i){for(var r=null;n!=r;)r=n,n=n.replace(t,function(n,t){return i[t]});return n}function u(n){if(o.utils.arrayIndexOf(i,o.utils.stringTrim(n).toLowerCase())>=0)return!1;var t=n.match(r);return t===null?!1:t[1]?"Object("+t[1]+")"+t[2]:n}function f(n){var t=o.utils.stringTrim(n);switch(t.length&&t.charAt(0)){case"'":case'"':return n;default:return"'"+t+"'"}}var t=/\@ko_token_(\d+)\@/g,i=["true","false"],r=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;return{bindingRewriteValidators:[],parseObjectLiteral:function(t){var r=o.utils.stringTrim(t),e,u,s,y,a,i,f,h,c,p,b,w,k,l,v,d,g;if(r.length<3)return[];for(r.charAt(0)==="{"&&(r=r.substring(1,r.length-1)),e=[],u=null,i=0;i<r.length;i++)if(f=r.charAt(i),u===null)switch(f){case'"':case"'":case"/":u=i,s=f}else f==s&&r.charAt(i-1)!=="\\"&&(h=r.substring(u,i+1),e.push(h),c="@ko_token_"+(e.length-1)+"@",r=r.substring(0,u)+c+r.substring(i+1),i-=h.length-c.length,u=null);for(u=null,s=null,y=0,a=null,i=0;i<r.length;i++){if(f=r.charAt(i),u===null)switch(f){case"{":u=i,a=f,s="}";break;case"(":u=i,a=f,s=")";break;case"[":u=i,a=f,s="]"}f===a?y++:f===s&&(y--,y===0&&(h=r.substring(u,i+1),e.push(h),c="@ko_token_"+(e.length-1)+"@",r=r.substring(0,u)+c+r.substring(i+1),i-=h.length-c.length,u=null))}for(p=[],b=r.split(","),w=0,k=b.length;w<k;w++)l=b[w],v=l.indexOf(":"),v>0&&v<l.length-1?(d=l.substring(0,v),g=l.substring(v+1),p.push({key:n(d,e),value:n(g,e)})):p.push({unknown:n(l,e)});return p},preProcessBindings:function(n){for(var a=typeof n=="string"?o.expressionRewriting.parseObjectLiteral(n):n,t=[],r=[],i,c,e,s,l,h=0;i=a[h];h++)t.length>0&&t.push(","),i.key?(c=f(i.key),e=i.value,t.push(c),t.push(":"),t.push(e),(e=u(o.utils.stringTrim(e)))&&(r.length>0&&r.push(", "),r.push(c+" : function(__ko_value) { "+e+" = __ko_value; }"))):i.unknown&&t.push(i.unknown);return s=t.join(""),r.length>0&&(l=r.join(""),s=s+", '_ko_property_writers' : { "+l+" } "),s},keyValueArrayContainsKey:function(n,t){for(var i=0;i<n.length;i++)if(o.utils.stringTrim(n[i].key)==t)return!0;return!1},writeValueToProperty:function(n,t,i,r,u){if(n&&o.isWriteableObservable(n))u&&n.peek()===r||n(r);else{var f=t()._ko_property_writers;f&&f[i]&&f[i](r)}}}}(),o.exportSymbol("expressionRewriting",o.expressionRewriting),o.exportSymbol("expressionRewriting.bindingRewriteValidators",o.expressionRewriting.bindingRewriteValidators),o.exportSymbol("expressionRewriting.parseObjectLiteral",o.expressionRewriting.parseObjectLiteral),o.exportSymbol("expressionRewriting.preProcessBindings",o.expressionRewriting.preProcessBindings),o.exportSymbol("jsonExpressionRewriting",o.expressionRewriting),o.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.expressionRewriting.preProcessBindings),function(){function n(n){return n.nodeType==8&&(t?n.text:n.nodeValue).match(e)}function r(n){return n.nodeType==8&&(t?n.text:n.nodeValue).match(s)}function u(t,i){for(var u=t,f=1,e=[];u=u.nextSibling;){if(r(u)&&(f--,f===0))return e;e.push(u),n(u)&&f++}if(!i)throw new Error("Cannot find closing comment tag to match: "+t.nodeValue);return null}function f(n,t){var i=u(n,t);return i?i.length>0?i[i.length-1].nextSibling:n.nextSibling:null}function c(t){var i=t.firstChild,u=null,e;if(i)do u?u.push(i):n(i)?(e=f(i,!0),e?i=e:u=[i]):r(i)&&(u=[i]);while(i=i.nextSibling);return u}var t=i.createComment("test").text==="<!--test-->",e=t?/^<!--\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*-->$/:/^\s*ko(?:\s+(.+\s*\:[\s\S]*))?\s*$/,s=t?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,h={ul:!0,ol:!0};o.virtualElements={allowedBindings:{},childNodes:function(t){return n(t)?u(t):t.childNodes},emptyNode:function(t){var r,i,u;if(n(t))for(r=o.virtualElements.childNodes(t),i=0,u=r.length;i<u;i++)o.removeNode(r[i]);else o.utils.emptyDomNode(t)},setDomNodeChildren:function(t,i){var u,r,f;if(n(t))for(o.virtualElements.emptyNode(t),u=t.nextSibling,r=0,f=i.length;r<f;r++)u.parentNode.insertBefore(i[r],u);else o.utils.setDomNodeChildren(t,i)},prepend:function(t,i){n(t)?t.parentNode.insertBefore(i,t.nextSibling):t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)},insertAfter:function(t,i,r){r?n(t)?t.parentNode.insertBefore(i,r.nextSibling):r.nextSibling?t.insertBefore(i,r.nextSibling):t.appendChild(i):o.virtualElements.prepend(t,i)},firstChild:function(t){return n(t)?!t.nextSibling||r(t.nextSibling)?null:t.nextSibling:t.firstChild},nextSibling:function(t){return(n(t)&&(t=f(t)),t.nextSibling&&r(t.nextSibling))?null:t.nextSibling},virtualNodeBindingValue:function(t){var i=n(t);return i?i[1]:null},normaliseVirtualElementDomStructure:function(n){var t,i,u,r;if(h[o.utils.tagNameLower(n)]&&(t=n.firstChild,t))do if(t.nodeType===1&&(i=c(t),i))for(u=t.nextSibling,r=0;r<i.length;r++)u?n.insertBefore(i[r],u):n.appendChild(i[r]);while(t=t.nextSibling)}}}(),o.exportSymbol("virtualElements",o.virtualElements),o.exportSymbol("virtualElements.allowedBindings",o.virtualElements.allowedBindings),o.exportSymbol("virtualElements.emptyNode",o.virtualElements.emptyNode),o.exportSymbol("virtualElements.insertAfter",o.virtualElements.insertAfter),o.exportSymbol("virtualElements.prepend",o.virtualElements.prepend),o.exportSymbol("virtualElements.setDomNodeChildren",o.virtualElements.setDomNodeChildren),function(){function t(n,t){var r=n;return t[r]||(t[r]=i(n))}function i(n){var t=o.expressionRewriting.preProcessBindings(n),i="with($context){with($data||{}){return{"+t+"}}}";return new Function("$context","$element",i)}var n="data-bind";o.bindingProvider=function(){this.bindingCache={}},o.utils.extend(o.bindingProvider.prototype,{nodeHasBindings:function(t){switch(t.nodeType){case 1:return t.getAttribute(n)!=null;case 8:return o.virtualElements.virtualNodeBindingValue(t)!=null;default:return!1}},getBindings:function(n,t){var i=this.getBindingsString(n,t);return i?this.parseBindingsString(i,t,n):null},getBindingsString:function(t){switch(t.nodeType){case 1:return t.getAttribute(n);case 8:return o.virtualElements.virtualNodeBindingValue(t);default:return null}},parseBindingsString:function(n,i,r){try{var u=t(n,this.bindingCache);return u(i,r)}catch(f){throw new Error("Unable to parse bindings.\nMessage: "+f+";\nBindings value: "+n);}}}),o.bindingProvider.instance=new o.bindingProvider}(),o.exportSymbol("bindingProvider",o.bindingProvider),function(){function e(n){var t=o.virtualElements.allowedBindings[n];if(!t)throw new Error("The binding '"+n+"' cannot be used with virtual elements");}function n(n,t,r){for(var u,f=o.virtualElements.firstChild(t);u=f;)f=o.virtualElements.nextSibling(u),i(n,u,r)}function i(t,i,u){var e=!0,f=i.nodeType===1,s;f&&o.virtualElements.normaliseVirtualElementDomStructure(i),s=f&&u||o.bindingProvider.instance.nodeHasBindings(i),s&&(e=r(i,null,t,u).shouldBindDescendants),e&&n(t,i,!f)}function r(n,t,i,r){function c(n){return function(){return u[n]}}function l(){return u}var s=0,u,h;return o.dependentObservable(function(){var y=i&&i instanceof o.bindingContext?i:new o.bindingContext(o.utils.unwrapObservable(i)),w=y.$data,b,k,p,v,a,d;if(r&&o.storedBindingContextForNode(n,y),b=typeof t=="function"?t(y,n):t,u=b||o.bindingProvider.instance.getBindings(n,y),u){if(s===0){s=1;for(v in u)if(a=o.bindingHandlers[v],a&&n.nodeType===8&&e(v),a&&typeof a.init=="function"&&(k=a.init,p=k(n,c(v),l,w,y),p&&p.controlsDescendantBindings)){if(h!==f)throw new Error("Multiple bindings ("+h+" and "+v+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");h=v}s=2}if(s===2)for(v in u)a=o.bindingHandlers[v],a&&typeof a.update=="function"&&(d=a.update,d(n,c(v),l,w,y))}},null,{disposeWhenNodeIsRemoved:n}),{shouldBindDescendants:h===f}}o.bindingHandlers={},o.bindingContext=function(n,t,i){t?(o.utils.extend(this,t),this.$parentContext=t,this.$parent=t.$data,this.$parents=(t.$parents||[]).slice(0),this.$parents.unshift(this.$parent)):(this.$parents=[],this.$root=n,this.ko=o),this.$data=n,i&&(this[i]=n)},o.bindingContext.prototype.createChildContext=function(n,t){return new o.bindingContext(n,this,t)},o.bindingContext.prototype.extend=function(n){var t=o.utils.extend(new o.bindingContext,this);return o.utils.extend(t,n)};var u="__ko_bindingContext__";o.storedBindingContextForNode=function(n,t){if(arguments.length==2)o.utils.domData.set(n,u,t);else return o.utils.domData.get(n,u)},o.applyBindingsToNode=function(n,t,i){return n.nodeType===1&&o.virtualElements.normaliseVirtualElementDomStructure(n),r(n,t,i,!0)},o.applyBindingsToDescendants=function(t,i){(i.nodeType===1||i.nodeType===8)&&n(t,i,!0)},o.applyBindings=function(n,r){if(r&&r.nodeType!==1&&r.nodeType!==8)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");r=r||t.document.body,i(n,r,!0)},o.contextFor=function(n){switch(n.nodeType){case 1:case 8:var t=o.storedBindingContextForNode(n);if(t)return t;if(n.parentNode)return o.contextFor(n.parentNode)}return f},o.dataFor=function(n){var t=o.contextFor(n);return t?t.$data:f},o.exportSymbol("bindingHandlers",o.bindingHandlers),o.exportSymbol("applyBindings",o.applyBindings),o.exportSymbol("applyBindingsToDescendants",o.applyBindingsToDescendants),o.exportSymbol("applyBindingsToNode",o.applyBindingsToNode),o.exportSymbol("contextFor",o.contextFor),o.exportSymbol("dataFor",o.dataFor)}(),a={"class":"className","for":"htmlFor"},o.bindingHandlers.attr={update:function(n,t){var e=o.utils.unwrapObservable(t())||{},i,r,u;for(i in e)typeof i=="string"&&(r=o.utils.unwrapObservable(e[i]),u=r===!1||r===null||r===f,u&&n.removeAttribute(i),o.utils.ieVersion<=8&&i in a?(i=a[i],u?n.removeAttribute(i):n[i]=r):u||n.setAttribute(i,r.toString()),i==="name"&&o.utils.setElementName(n,u?"":r.toString()))}},o.bindingHandlers.checked={init:function(n,t,i){var r=function(){var f,r,e,u;if(n.type=="checkbox")f=n.checked;else if(n.type=="radio"&&n.checked)f=n.value;else return;r=t(),e=o.utils.unwrapObservable(r),n.type=="checkbox"&&e instanceof Array?(u=o.utils.arrayIndexOf(e,n.value),n.checked&&u<0?r.push(n.value):!n.checked&&u>=0&&r.splice(u,1)):o.expressionRewriting.writeValueToProperty(r,i,"checked",f,!0)};o.utils.registerEventHandler(n,"click",r),n.type!="radio"||n.name||o.bindingHandlers.uniqueName.init(n,function(){return!0})},update:function(n,t){var i=o.utils.unwrapObservable(t());n.type=="checkbox"?n.checked=i instanceof Array?o.utils.arrayIndexOf(i,n.value)>=0:i:n.type=="radio"&&(n.checked=n.value==i)}},v="__ko__cssValue",o.bindingHandlers.css={update:function(n,t){var i=o.utils.unwrapObservable(t()),r,u;if(typeof i=="object")for(r in i)u=o.utils.unwrapObservable(i[r]),o.utils.toggleDomNodeCssClass(n,r,u);else i=String(i||""),o.utils.toggleDomNodeCssClass(n,n[v],!1),n[v]=i,o.utils.toggleDomNodeCssClass(n,i,!0)}},o.bindingHandlers.enable={update:function(n,t){var i=o.utils.unwrapObservable(t());i&&n.disabled?n.removeAttribute("disabled"):i||n.disabled||(n.disabled=!0)}},o.bindingHandlers.disable={update:function(n,t){o.bindingHandlers.enable.update(n,function(){return!o.utils.unwrapObservable(t())})}},o.bindingHandlers.event={init:function(n,t,i,r){var f=t()||{},u;for(u in f)(function(){var f=u;typeof f=="string"&&o.utils.registerEventHandler(n,f,function(n){var e,s=t()[f],h,u,c;if(s){h=i();try{u=o.utils.makeArray(arguments),u.unshift(r),e=s.apply(r,u)}finally{e!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}c=h[f+"Bubble"]!==!1,c||(n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation())}})})()}},o.bindingHandlers.foreach={makeTemplateValueAccessor:function(n){return function(){var i=n(),t=o.utils.peekObservable(i);return!t||typeof t.length=="number"?{foreach:i,templateEngine:o.nativeTemplateEngine.instance}:(o.utils.unwrapObservable(i),{foreach:t.data,as:t.as,includeDestroyed:t.includeDestroyed,afterAdd:t.afterAdd,beforeRemove:t.beforeRemove,afterRender:t.afterRender,beforeMove:t.beforeMove,afterMove:t.afterMove,templateEngine:o.nativeTemplateEngine.instance})}},init:function(n,t){return o.bindingHandlers.template.init(n,o.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(n,t,i,r,u){return o.bindingHandlers.template.update(n,o.bindingHandlers.foreach.makeTemplateValueAccessor(t),i,r,u)}},o.expressionRewriting.bindingRewriteValidators.foreach=!1,o.virtualElements.allowedBindings.foreach=!0,h="__ko_hasfocusUpdating",o.bindingHandlers.hasfocus={init:function(n,t,i){var r=function(r){var u,f;n[h]=!0,u=n.ownerDocument,"activeElement"in u&&(r=u.activeElement===n),f=t(),o.expressionRewriting.writeValueToProperty(f,i,"hasfocus",r,!0),n[h]=!1},u=r.bind(null,!0),f=r.bind(null,!1);o.utils.registerEventHandler(n,"focus",u),o.utils.registerEventHandler(n,"focusin",u),o.utils.registerEventHandler(n,"blur",f),o.utils.registerEventHandler(n,"focusout",f)},update:function(n,t){var i=o.utils.unwrapObservable(t());n[h]||(i?n.focus():n.blur(),o.dependencyDetection.ignore(o.utils.triggerEvent,null,[n,i?"focusin":"focusout"]))}},o.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t){o.utils.setHtml(n,t())}},y="__ko_withIfBindingData",p("if"),p("ifnot",!1,!0),p("with",!0,!1,function(n,t){return n.createChildContext(t)}),o.bindingHandlers.options={update:function(n,t,r){var s,y,c,e,v,p,a,w,u,l;if(o.utils.tagNameLower(n)!=="select")throw new Error("options binding applies only to SELECT elements");for(var k=n.length==0,d=o.utils.arrayMap(o.utils.arrayFilter(n.childNodes,function(n){return n.tagName&&o.utils.tagNameLower(n)==="option"&&n.selected}),function(n){return o.selectExtensions.readValue(n)||n.innerText||n.textContent}),g=n.scrollTop,h=o.utils.unwrapObservable(t()),nt=n.value;n.length>0;)o.cleanNode(n.options[0]),n.remove(0);if(h){for(s=r(),y=s.optionsIncludeDestroyed,typeof h.length!="number"&&(h=[h]),s.optionsCaption&&(e=i.createElement("option"),o.utils.setHtml(e,s.optionsCaption),o.selectExtensions.writeValue(e,f),n.appendChild(e)),u=0,l=h.length;u<l;u++)if(c=h[u],!c||!c._destroy||y){e=i.createElement("option");function t(n,t,i){var r=typeof t;return r=="function"?t(n):r=="string"?n[t]:i}v=t(c,s.optionsValue,c),o.selectExtensions.writeValue(e,o.utils.unwrapObservable(v)),p=t(c,s.optionsText,v),o.utils.setTextContent(e,p),n.appendChild(e)}for(a=n.getElementsByTagName("option"),w=0,u=0,l=a.length;u<l;u++)o.utils.arrayIndexOf(d,o.selectExtensions.readValue(a[u]))>=0&&(o.utils.setOptionNodeSelectionState(a[u],!0),w++);n.scrollTop=g,k&&"value"in s&&b(n,o.utils.peekObservable(s.value),!0),o.utils.ensureSelectElementIsRenderedCorrectly(n)}}},o.bindingHandlers.options.optionValueDomDataKey="__ko.optionValueDomData__",o.bindingHandlers.selectedOptions={init:function(n,t,i){o.utils.registerEventHandler(n,"change",function(){var u=t(),r=[];o.utils.arrayForEach(n.getElementsByTagName("option"),function(n){n.selected&&r.push(o.selectExtensions.readValue(n))}),o.expressionRewriting.writeValueToProperty(u,i,"value",r)})},update:function(n,t){if(o.utils.tagNameLower(n)!="select")throw new Error("values binding applies only to SELECT elements");var i=o.utils.unwrapObservable(t());i&&typeof i.length=="number"&&o.utils.arrayForEach(n.getElementsByTagName("option"),function(n){var t=o.utils.arrayIndexOf(i,o.selectExtensions.readValue(n))>=0;o.utils.setOptionNodeSelectionState(n,t)})}},o.bindingHandlers.style={update:function(n,t){var r=o.utils.unwrapObservable(t()||{}),i,u;for(i in r)typeof i=="string"&&(u=o.utils.unwrapObservable(r[i]),n.style[i]=u||"")}},o.bindingHandlers.submit={init:function(n,t,i,r){if(typeof t()!="function")throw new Error("The value for a submit binding must be a function");o.utils.registerEventHandler(n,"submit",function(i){var u,f=t();try{u=f.call(r,n)}finally{u!==!0&&(i.preventDefault?i.preventDefault():i.returnValue=!1)}})}},o.bindingHandlers.text={update:function(n,t){o.utils.setTextContent(n,t())}},o.virtualElements.allowedBindings.text=!0,o.bindingHandlers.uniqueName={init:function(n,t){if(t()){var i="ko_unique_"+ ++o.bindingHandlers.uniqueName.currentIndex;o.utils.setElementName(n,i)}}},o.bindingHandlers.uniqueName.currentIndex=0,o.bindingHandlers.value={init:function(n,t,i){var r=["change"],u=i().valueUpdate,e=!1,f,s;u&&(typeof u=="string"&&(u=[u]),o.utils.arrayPushAll(r,u),r=o.utils.arrayGetDistinctValues(r)),f=function(){e=!1;var r=t(),u=o.selectExtensions.readValue(n);o.expressionRewriting.writeValueToProperty(r,i,"value",u)},s=o.utils.ieVersion&&n.tagName.toLowerCase()=="input"&&n.type=="text"&&n.autocomplete!="off"&&(!n.form||n.form.autocomplete!="off"),s&&o.utils.arrayIndexOf(r,"propertychange")==-1&&(o.utils.registerEventHandler(n,"propertychange",function(){e=!0}),o.utils.registerEventHandler(n,"blur",function(){e&&f()})),o.utils.arrayForEach(r,function(t){var i=f;o.utils.stringStartsWith(t,"after")&&(i=function(){setTimeout(f,0)},t=t.substring("after".length)),o.utils.registerEventHandler(n,t,i)})},update:function(n,t){var f=o.utils.tagNameLower(n)==="select",i=o.utils.unwrapObservable(t()),r=o.selectExtensions.readValue(n),e=i!=r,u,s;i===0&&r!==0&&r!=="0"&&(e=!0),e&&(u=function(){o.selectExtensions.writeValue(n,i)},u(),s=f,s&&setTimeout(u,0)),f&&n.length>0&&b(n,i,!1)}},o.bindingHandlers.visible={update:function(n,t){var i=o.utils.unwrapObservable(t()),r=!(n.style.display=="none");i&&!r?n.style.display="":!i&&r&&(n.style.display="none")}},d("click"),o.templateEngine=function(){},o.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource");},o.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock");},o.templateEngine.prototype.makeTemplateSource=function(n,t){if(typeof n=="string"){t=t||i;var r=t.getElementById(n);if(!r)throw new Error("Cannot find template with ID "+n);return new o.templateSources.domElement(r)}if(n.nodeType==1||n.nodeType==8)return new o.templateSources.anonymousTemplate(n);throw new Error("Unknown template type: "+n);},o.templateEngine.prototype.renderTemplate=function(n,t,i,r){var u=this.makeTemplateSource(n,r);return this.renderTemplateSource(u,t,i)},o.templateEngine.prototype.isTemplateRewritten=function(n,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(n,t).data("isRewritten")},o.templateEngine.prototype.rewriteTemplate=function(n,t,i){var r=this.makeTemplateSource(n,i),u=t(r.text());r.text(u),r.data("isRewritten",!0)},o.exportSymbol("templateEngine",o.templateEngine),o.templateRewriting=function(){function r(n){for(var f=o.expressionRewriting.bindingRewriteValidators,i,r,u,t=0;t<n.length;t++)if(i=n[t].key,f.hasOwnProperty(i))if(r=f[i],typeof r=="function"){if(u=r(n[t].value),u)throw new Error(u);}else if(!r)throw new Error("This template engine does not support the '"+i+"' binding within its templates");}function n(n,t,i){var u=o.expressionRewriting.parseObjectLiteral(n),f,e;return r(u),f=o.expressionRewriting.preProcessBindings(u),e="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+f+" } })()})",i.createJavaScriptEvaluatorBlock(e)+t}var t=/(<[a-z]+\d*(\s+(?!data-bind=)[a-z0-9\-]+(=(\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind=(["'])([\s\S]*?)\5/gi,i=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(n,t,i){t.isTemplateRewritten(n,i)||t.rewriteTemplate(n,function(n){return o.templateRewriting.memoizeBindingAttributeSyntax(n,t)},i)},memoizeBindingAttributeSyntax:function(r,u){return r.replace(t,function(){return n(arguments[6],arguments[1],u)}).replace(i,function(){return n(arguments[1],"<!-- ko -->",u)})},applyMemoizedBindingsToNextSibling:function(n){return o.memoization.memoize(function(t,i){t.nextSibling&&o.applyBindingsToNode(t.nextSibling,n,i)})}}}(),o.exportSymbol("__tr_ambtns",o.templateRewriting.applyMemoizedBindingsToNextSibling),function(){o.templateSources={},o.templateSources.domElement=function(n){this.domElement=n},o.templateSources.domElement.prototype.text=function(){var i=o.utils.tagNameLower(this.domElement),n=i==="script"?"text":i==="textarea"?"value":"innerHTML",t;if(arguments.length==0)return this.domElement[n];t=arguments[0],n==="innerHTML"?o.utils.setHtml(this.domElement,t):this.domElement[n]=t},o.templateSources.domElement.prototype.data=function(n){if(arguments.length===1)return o.utils.domData.get(this.domElement,"templateSourceData_"+n);o.utils.domData.set(this.domElement,"templateSourceData_"+n,arguments[1])};var n="__ko_anon_template__";o.templateSources.anonymousTemplate=function(n){this.domElement=n},o.templateSources.anonymousTemplate.prototype=new o.templateSources.domElement,o.templateSources.anonymousTemplate.prototype.text=function(){var t,i;if(arguments.length==0)return t=o.utils.domData.get(this.domElement,n)||{},t.textData===f&&t.containerData&&(t.textData=t.containerData.innerHTML),t.textData;i=arguments[0],o.utils.domData.set(this.domElement,n,{textData:i})},o.templateSources.domElement.prototype.nodes=function(){var t,i;if(arguments.length==0)return t=o.utils.domData.get(this.domElement,n)||{},t.containerData;i=arguments[0],o.utils.domData.set(this.domElement,n,{containerData:i})},o.exportSymbol("templateSources",o.templateSources),o.exportSymbol("templateSources.domElement",o.templateSources.domElement),o.exportSymbol("templateSources.anonymousTemplate",o.templateSources.anonymousTemplate)}(),function(){function r(n,t,i){for(var r,u=n,f=o.virtualElements.nextSibling(t);u&&(r=u)!==f;)u=o.virtualElements.nextSibling(r),(r.nodeType===1||r.nodeType===8)&&i(r)}function u(n,t){if(n.length){var i=n[0],u=n[n.length-1];r(i,u,function(n){o.applyBindings(t,n)}),r(i,u,function(n){o.memoization.unmemoizeDomNodeAndDescendants(n,[t])})}}function t(n){return n.nodeType?n:n.length>0?n[0]:null}function e(i,r,f,e,s){var h,c;s=s||{};var l=i&&t(i),a=l&&l.ownerDocument,v=s.templateEngine||n;if(o.templateRewriting.ensureTemplateIsRewritten(f,v,a),h=v.renderTemplate(f,e,s,a),typeof h.length!="number"||h.length>0&&typeof h[0].nodeType!="number")throw new Error("Template engine must return an array of DOM nodes");c=!1;switch(r){case"replaceChildren":o.virtualElements.setDomNodeChildren(i,h),c=!0;break;case"replaceNode":o.utils.replaceDomNodes(i,h),c=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+r);}return c&&(u(h,e),s.afterRender&&o.dependencyDetection.ignore(s.afterRender,null,[h,e.$data])),h}function s(n,t){var r=o.utils.domData.get(n,i);r&&typeof r.dispose=="function"&&r.dispose(),o.utils.domData.set(n,i,t&&t.isActive()?t:f)}var n,i;o.setTemplateEngine=function(t){if(t!=f&&!(t instanceof o.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");n=t},o.renderTemplate=function(i,r,u,s,h){if(u=u||{},(u.templateEngine||n)==f)throw new Error("Set a template engine before calling renderTemplate");if(h=h||"replaceChildren",s){var c=t(s),l=function(){return!c||!o.utils.domNodeIsAttachedToDocument(c)},a=c&&h=="replaceNode"?c.parentNode:c;return o.dependentObservable(function(){var n=r&&r instanceof o.bindingContext?r:new o.bindingContext(o.utils.unwrapObservable(r)),f=typeof i=="function"?i(n.$data,n):i,l=e(s,h,f,n,u);h=="replaceNode"&&(s=l,c=t(s))},null,{disposeWhen:l,disposeWhenNodeIsRemoved:a})}return o.memoization.memoize(function(n){o.renderTemplate(i,r,u,n,"replaceNode")})},o.renderTemplateForEach=function(n,t,i,r,s){var h,c=function(t,r){h=s.createChildContext(o.utils.unwrapObservable(t),i.as),h.$index=r;var u=typeof n=="function"?n(t,h):n;return e(null,"ignoreTargetNode",u,h,i)},l=function(n,t){u(t,h),i.afterRender&&i.afterRender(t,n)};return o.dependentObservable(function(){var n=o.utils.unwrapObservable(t)||[],u;typeof n.length=="undefined"&&(n=[n]),u=o.utils.arrayFilter(n,function(n){return i.includeDestroyed||n===f||n===null||!o.utils.unwrapObservable(n._destroy)}),o.dependencyDetection.ignore(o.utils.setDomNodeChildrenFromArrayMapping,null,[r,u,c,i,l])},null,{disposeWhenNodeIsRemoved:r})},i="__ko__templateComputedDomDataKey__",o.bindingHandlers.template={init:function(n,t){var i=o.utils.unwrapObservable(t()),r,u;return typeof i=="string"||i.name||n.nodeType!=1&&n.nodeType!=8||(r=n.nodeType==1?n.childNodes:o.virtualElements.childNodes(n),u=o.utils.moveCleanedNodesToContainerElement(r),new o.templateSources.anonymousTemplate(n).nodes(u)),{controlsDescendantBindings:!0}},update:function(n,t,i,r,u){var e=o.utils.unwrapObservable(t()),f={},h=!0,l,c=null,a,v;typeof e!="string"&&(f=e,e=f.name,"if"in f&&(h=o.utils.unwrapObservable(f["if"])),h&&"ifnot"in f&&(h=!o.utils.unwrapObservable(f.ifnot)),l=o.utils.unwrapObservable(f.data)),"foreach"in f?(a=h&&f.foreach||[],c=o.renderTemplateForEach(e||n,a,f,n,u)):h?(v="data"in f?u.createChildContext(l,f.as):u,c=o.renderTemplate(e||n,v,f,n)):o.virtualElements.emptyNode(n),s(n,c)}},o.expressionRewriting.bindingRewriteValidators.template=function(n){var t=o.expressionRewriting.parseObjectLiteral(n);return t.length==1&&t[0].unknown?null:o.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.virtualElements.allowedBindings.template=!0}(),o.exportSymbol("setTemplateEngine",o.setTemplateEngine),o.exportSymbol("renderTemplate",o.renderTemplate),o.utils.compareArrays=function(){function r(r,u,f){return r=r||[],u=u||[],r.length<=u.length?i(r,u,n,t,f):i(u,r,t,n,f)}function i(n,t,i,r,u){for(var nt=Math.min,ot=Math.max,l=[],c=n.length,f,a=t.length,st=a-c||1,tt=c+a+1,o,b,it,rt,ut,ft,et,y,g,h,p,w,e=0;e<=c;e++)for(b=o,l.push(o=[]),it=nt(a,e+st),rt=ot(0,e-1),f=rt;f<=it;f++)f?e?n[e-1]===t[f-1]?o[f]=b[f-1]:(ut=b[f]||tt,ft=o[f-1]||tt,o[f]=nt(ut,ft)+1):o[f]=f+1:o[f]=e+1;var s=[],k,d=[],v=[];for(e=c,f=a;e||f;)k=l[e][f]-1,f&&k===l[e][f-1]?d.push(s[s.length]={status:i,value:t[--f],index:f}):e&&k===l[e-1][f]?v.push(s[s.length]={status:r,value:n[--e],index:e}):(s.push({status:"retained",value:t[--f]}),--e);if(d.length&&v.length)for(et=c*10,y=g=0;(u||y<et)&&(p=d[g]);g++){for(h=0;w=v[h];h++)if(p.value===w.value){p.moved=w.index,w.moved=p.index,v.splice(h,1),y=h=0;break}y+=h}return s.reverse()}var n="added",t="deleted";return r}(),o.exportSymbol("utils.compareArrays",o.utils.compareArrays),function(){function n(n){while(n.length&&!o.utils.domNodeIsAttachedToDocument(n[0]))n.splice(0,1);if(n.length>1){for(var t=n[0],r=n[n.length-1],i=[t];t!==r;){if(t=t.nextSibling,!t)return;i.push(t)}Array.prototype.splice.apply(n,[0,n.length].concat(i))}return n}function i(t,i,r,u,e){var s=[],h=o.dependentObservable(function(){var t=i(r,e)||[];s.length>0&&(o.utils.replaceDomNodes(n(s),t),u&&o.dependencyDetection.ignore(u,null,[r,t,e])),s.splice(0,s.length),o.utils.arrayPushAll(s,t)},null,{disposeWhenNodeIsRemoved:t,disposeWhen:function(){return s.length==0||!o.utils.domNodeIsAttachedToDocument(s[0])}});return{mappedNodes:s,dependentObservable:h.isActive()?h:f}}var t="setDomNodeChildrenFromArrayMapping_lastMappingResult";o.utils.setDomNodeChildrenFromArrayMapping=function(r,u,e,s,h){function et(t,i){c=b[i],g!==i&&(tt[t]=c),c.indexObservable(g++),n(c.mappedNodes),k.push(c),v.push(c)}function y(n,t){if(n)for(var i=0,r=t.length;i<r;i++)t[i]&&o.utils.arrayForEach(t[i].mappedNodes,function(r){n(r,i,t[i].arrayEntry)})}var p,w,l,it,ot,a,rt;u=u||[],s=s||{};var st=o.utils.domData.get(r,t)===f,b=o.utils.domData.get(r,t)||[],ht=o.utils.arrayMap(b,function(n){return n.arrayEntry}),ct=o.utils.compareArrays(ht,u),k=[],d=0,g=0,nt=[],v=[],ut=[],tt=[],ft=[],c;for(l=0;p=ct[l];l++){w=p.moved;switch(p.status){case"deleted":w===f&&(c=b[d],c.dependentObservable&&c.dependentObservable.dispose(),nt.push.apply(nt,n(c.mappedNodes)),s.beforeRemove&&(ut[l]=c,v.push(c))),d++;break;case"retained":et(l,d++);break;case"added":w!==f?et(l,w):(c={arrayEntry:p.value,indexObservable:o.observable(g++)},k.push(c),v.push(c),st||(ft[l]=c))}}for(y(s.beforeMove,tt),o.utils.arrayForEach(nt,s.beforeRemove?o.cleanNode:o.removeNode),l=0,it=o.virtualElements.firstChild(r);c=v[l];l++){for(c.mappedNodes||o.utils.extend(c,i(r,e,c.arrayEntry,h,c.indexObservable)),rt=0;a=c.mappedNodes[rt];it=a.nextSibling,ot=a,rt++)a!==it&&o.virtualElements.insertAfter(r,a,ot);!c.initialized&&h&&(h(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}y(s.beforeRemove,ut),y(s.afterMove,tt),y(s.afterAdd,ft),o.utils.domData.set(r,t,k)}}(),o.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",o.utils.setDomNodeChildrenFromArrayMapping),o.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},o.nativeTemplateEngine.prototype=new o.templateEngine,o.nativeTemplateEngine.prototype.renderTemplateSource=function(n){var r=!(o.utils.ieVersion<9),u=r?n.nodes:null,t=u?n.nodes():null,i;return t?o.utils.makeArray(t.cloneNode(!0).childNodes):(i=n.text(),o.utils.parseHtmlFragment(i))},o.nativeTemplateEngine.instance=new o.nativeTemplateEngine,o.setTemplateEngine(o.nativeTemplateEngine.instance),o.exportSymbol("nativeTemplateEngine",o.nativeTemplateEngine),function(){o.jqueryTmplTemplateEngine=function(){function t(){if(n<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");}function r(n,t,i){return u.tmpl(n,t,i)}var n=this.jQueryTmplVersion=function(){if(typeof u=="undefined"||!u.tmpl)return 0;try{if(u.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(n){}return 1}();this.renderTemplateSource=function(n,f,e){var o,s;e=e||{},t(),o=n.data("precompiled"),o||(s=n.text()||"",s="{{ko_with $item.koBindingContext}}"+s+"{{/ko_with}}",o=u.template(null,s),n.data("precompiled",o));var c=[f.$data],l=u.extend({koBindingContext:f},e.templateOptions),h=r(o,c,l);return h.appendTo(i.createElement("div")),u.fragments={},h},this.createJavaScriptEvaluatorBlock=function(n){return"{{ko_code ((function() { return "+n+" })()) }}"},this.addTemplate=function(n,t){i.write("<script type='text/html' id='"+n+"'>"+t+"<\/script>")},n>0&&(u.tmpl.tag.ko_code={open:"__.push($1 || '');"},u.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.jqueryTmplTemplateEngine.prototype=new o.templateEngine;var n=new o.jqueryTmplTemplateEngine;n.jQueryTmplVersion>0&&o.setTemplateEngine(n),o.exportSymbol("jqueryTmplTemplateEngine",o.jqueryTmplTemplateEngine)}()})})(window,document,navigator,window.jQuery)})();
//@ sourceMappingURL=knockout-2.2.1.debug.min.js.map